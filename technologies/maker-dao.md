# MakerDAO in Echo

## Общее описание

MakerDAO - это система, состоящая из большого количества контрактов, 
основная задача которой, стабилизация стоимости одного из своих токенов
по отношению к долларту, с помощью динамической системы обеспеченных 
залогом долговых обязательств (Collateralized Debt Positions, CDP).

Другими словами - это система, в которой можно получить стейблкоин, 
заложив свой ефир. А стабилизация по отношению к доллару производится 
путем голосования по поводу цены ефира к доллару и расчета залога. 
Причем с учетом того, что цена Ethereum меняется постоянно и по сути 
залог, внесенный ранее, может иметь уже абсолютно иную стоимость по 
отношению к доллару, стабилизация происходит за счет изменения цены и 
объемов дополнительного токена, в котором и только в котором можно 
оплачивать проценты по залогу.

## Ключевые элементы системы

- **DAI** - ERC20 стейблкоин, "привязан" к доллару
- **MKR** - токен ERC20, используемый для голосования держателями MKR с
правом голоса. Он также используется в качестве обеспечения для
несостоятельных долговых залоговых обязательств.
- **Залоговое долговое обязательство (CDP)** - умный контракт, пользователи
которого получают актив (Dai), фактически выступающий в качестве долгового
инструмента с процентной ставкой. Пользователь залогового долгового
обязательства переводит залог, значительно превышающий сумму ссуды,
чтобы гарантировать свое долговое обязательство.

## Основные отличия MakerDAO в Echo и Ethereum

1. Привязка к BTC вместо Ethereum. В сети Echo ресурсом залогового
обязательсва является eBTC - "стейблкоин" BTC в сети Echo. В сети
Ethereum ресурсом является ETH.
1. Отстутствие промежуточных PETH и WETH токенов. В сети Ethereum
для работы с контрактами MakerDAO требуется предварительная конвертация
ETH в ERC20 токены. В сети Echo данные шаги упразнены, так как мы
изначально можем работать с выделенным для этого ассетом.
1. В качестве оракула выступает комитет Echo. Сеть Echo построена тиким
образом, что роль оракула в сети испольняет комитет - набор доверенных
аккаунтов, выбранных путем голосования стеком владельцами ECHO. Именно
на них в сети Echo будет возложена ответственность за информирование
системы контрактов о текущем рыночном курсе MKR, DAI и BTC. В 
оригинальной системе makerDAO эту роль так же выполняет комитет, но
сформированный непосредственно для системы и поддерживаемый голосами
владельцев MRK.

## Основные механизмы в системе

### Процесс получения DAI через долговое обязательство

**в сети Echo*

Для получения DAI, пользователю необходимо пройти несколько шагов,
которые в фоне представляют из себя последовательность создания и
вызовов контрактов.

1. Первым этапом является получение eBTC
1. Затем пользователь должен создать контракт CDP определенного формата
1. На созданный CDP пользователю необходимо заложить его eBTC. Взамен
пользователь получает DAI. 


### Процесс получения eBTC через погашение долгового обязательства

**в сети Echo*

Для получения eBTC, пользователю необходимо вернуть в CDP полученные
ранее DAI, а так же погасить набежавший процент токеном MKR.

В связи с этим пользователю необходимо в первую очередь купить MKR и
только тогда он сможет вернуть заложенный eBTC.

Пользователь переводит на CDP его DAI и MKR и получает в ответ eBTC.

### Голосование

Так как роль оракула исполняет комитет Echo, механизм голосования 
пользователями заменен механизмом отправки фидом участниками комитета.

Данный механизм выбран осознанно. Несмотря на то, что держатели MKD 
больше заинтересованы в качестве и активности участников оракула, в
реальной жизни пользователи являются довольно пассивными участниками,
что приводит к недостаточному уровню децентрализации голосов. Переход
к глобальному комитету Echo позволит повысить качество децентрализации
голосования, а, соответственно, качество децентрализации участников
оракула.

## Шаги реализации

1. форк текущей системы контрактов, адаптация репозиториев
1. разработка механизма деплоя контрактов для сети Echo
1. упразднение работы с токенами WETH и PETH.
1. добавление взаимодействия с ассетом eBTC
1. изменение механизма информирования сети о ценах - замена на фидирование
1. упразднение голосования за оракул
1. адаптация dao.js под Echo
1. адаптация скриптов и сценариев деплоя CDP под Echo
1. реализация поддержки makerDAO в експлорере, кошельках, библиотеках

Дополнительно долен быть реализован механизм первоначальной продажи
токена MKR. 
